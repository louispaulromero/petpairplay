<!DOCTYPE html>
<html>
  <head>
    <title>Pet Pair Play</title>
    <link
      href="https://fonts.googleapis.com/css?family=Fira+Sans"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="bootstrap/css/bootstrap.css"
    />
    <script src="bootstrap/js/bootstrap.bundle.js"></script>

    <!--
    <link rel="stylesheet" type="text/css" href="../css/main.css" />
    -->

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PetPairPlay Web App</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />

    <style>
      header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
      }

      .home.hidden,
      .btn.hidden {
        display: none;
      }

      .planet-blurb {
        background-color: white;
        padding: 2rem;
        box-shadow: 0 0 1rem rgba(0, 0, 0, 0.1);
        display: flex;
        gap: 4rem;
        align-items: center;

        &.hidden {
          display: none;
        }
      }

      .planet-image {
        flex: 1;
      }

      .planet-image img {
        max-width: 100%;
      }

      .planet-info {
        flex: 2;
      }

      .home img {
        max-height: 220px;
      }

      .home .card {
        max-width: 600px;
        margin: 0 auto;
      }
    </style>
  </head>






  <body>

  <header class="app-header">
    <div class="logo">
      <img src="./assets/petpairplaylogo.svg" alt="PetPairPlay Logo" class="logo-icon" />
      <span class="logo-text">Pet Pair Play</span>
    </div>

    <div class="header-icons">
      <button class="icon-btn" aria-label="Learn">
        <img src="./assets/education-center.svg" alt="Graduation cap icon for Education Center" />
      </button>
      <button class="icon-btn" aria-label="Notifications">
        <img src="./assets/Notification.svg" alt="Bell icon for Notifications" />
      </button>
      <button class="icon-btn" aria-label="Profile">
        <img src="./assets/profile.svg" alt="User profile icon" />
      </button>
    </div>
  </header>

    <div class="container">
      <header>
        <h1></h1>
        <button class="btn btn-secondary hidden" id="home-button">Back</button>
      </header>

      <div class="home" id="home-page">
        <div class="query">
          <form class="input-group mb-4" id="suggest-form">
            <input
              type="text"
              class="form-control"
              id="query-input"
              placeholder="What are you looking for?"
              aria-label="What are you looking for?"
            />
            <button
              class="btn btn-outline-primary"
              type="submit"
              id="suggest-button"
            >
              Help me choose
            </button>
          </form>
        </div>

        <div class="card mb-3" role="button" id="alekhine-button">
          <div class="row g-0">
            <div class="col-md-4">
              <img
                src="rabbit_images/rabbit1.png"
                class="img-fluid rounded-start"
                alt="Cute Bunny 1"
              />
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h2 class="card-title">Name: </h2>
                <p>Sex: </p>
                <p>Breed: </p>
                <p>Age: </p>
                <p>Adoption Fee: </p>
              </div>
            </div>
          </div>
        </div>


        <div class="card mb-3" role="button" id="janon-button">
          <div class="row g-0">
            <div class="col-md-4">
              <img
                src="images/janon.png"
                class="img-fluid rounded-start"
                alt="A depiction of the planet Janon, produced by SXDL 1.0"
              />
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h2 class="card-title">Janon</h2>
              </div>
            </div>
          </div>
        </div>

        <div class="card mb-3" role="button" id="guilin-button">
          <div class="row g-0">
            <div class="col-md-4">
              <img
                src="images/guilin.png"
                class="img-fluid rounded-start"
                alt="A depiction of the planet Guilin, produced by SXDL 1.0"
              />
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h2 class="card-title">Guilin</h2>
              </div>
            </div>
          </div>
        </div>

        <div class="card mb-3" role="button" id="jayne-button">
          <div class="row g-0">
            <div class="col-md-4">
              <img
                src="images/jayne.png"
                class="img-fluid rounded-start"
                alt="A depiction of the planet Jayne, produced by SXDL 1.0"
              />
            </div>
            <div class="col-md-8">
              <div class="card-body">
                <h2 class="card-title">Jayne</h2>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Below are the "sub-pages", hidden for now but revealed when the cards are clicked -->

      <div class="hidden planet-blurb" id="alekhine-blurb">
        <div class="planet-image">
          <img
            src="rabbit_images/rabbit1.png"
            alt="A depiction of the planet Alekhine, produced by SXDL 1.0"
          />
        </div>
        <div class="planet-info">
          <h2>Name: </h2>
          <div id="custom-blurb"></div>
            <p>Location: </p>
            <p>Distance: </p>            
            <p>Sex: </p>
            <p>Breed: </p>
            <p>Weight: </p>
            <p>Age: </p>
            <p>Adoption Fee: </p>
            <p>Personality Traits: </p>
            <p>Biography: </p>
        </div>
      </div>

      <div class="hidden planet-blurb" id="janon-blurb">
        <div class="planet-image">
          <img
            src="images/janon.png"
            alt="A depiction of the planet Janon, produced by SXDL 1.0"
          />
        </div>
        <div class="planet-info">
          <h2>Janon</h2>
          <div id="custom-blurb"></div>
          <p>
            The planet Janon is filled to the brim with nature, both oddly
            familiar and completely bewildering to natives of Earth. Equalizing
            wind currents leave most of the planet at an equally tropical
            temperature, lush with fractal tree-like plants, dotted with
            reservoirs of mostly-fresh water, and populated with beasts both
            mighty and meek. Compared to organisms on Earth, animals tend to be
            less astute (and none is nearly as intelligent as Earth’s primates
            are), but plants seem to flourish in coordinated patterns, leaving
            some to believe that they possess some limited intelligence of their
            own.
          </p>

          <p>
            Human outposts are hard to come by, since building them involves
            cutting through dense jungle in most parts of the world. Those
            settlements that do exist tend to be densely populated, with
            tightly-packed tall buildings that look over canopies of trees off
            in the distance.
          </p>
          <p>
            Janon is known for its exquisite cuisine, a trait unfortunately not
            coincidental with its rich wildlife; animals’ naturally-evolved
            instincts on the planet are no match for the skills of even a
            rudimentary hunter. Already some of the most delectable species on
            the planet are considered endangered, just a few generations after
            humanity systematically catalogued which meats were safe to eat,
            which were toxic, and which seem to just give you the runs.
          </p>
          <p>
            The crown jewel of Janon is Valoret, a city built in a rare clearing
            occupying around a hundred thousand acres. Local cuisine from around
            the planet is imported into the city, kept fresh only by the
            efficiency of a one-of-a-kind aerial logistics system that is held
            aloft by the globe’s natural wind currents. Beyond the clearing,
            suburbs expand outwards into the surrounding rainforest, connected
            by an underground transportation system that keeps the aboveground
            biosphere largely untouched.
          </p>
        </div>
      </div>

      <div class="hidden planet-blurb" id="guilin-blurb">
        <div class="planet-image">
          <img
            src="images/guilin.png"
            alt="A depiction of the planet Guilin, produced by SXDL 1.0"
          />
        </div>
        <div class="planet-info">
          <h2>Guilin</h2>
          <div id="custom-blurb"></div>
          <p>
            Owing to its regular seismic activity, the planet Guilin is a haven
            for those who enjoy hot springs and impressive geyser displays.
            Downward erosion caused by fast-moving water has crafted tall stone
            towers in many regions on the planet, not unlike the world’s
            namesake back on Earth.
          </p>

          <p>
            The largest springs have been commercialized in resorts not unlike
            water parks, and sizable cities analogous to Earth’s beach towns
            have sprung up in support of these resorts. Those looking for a
            quieter place to appreciate the scenery will find no shortage of
            more private springs, especially far from the more densely-populated
            areas.
          </p>

          <p>
            The natural spires of Guilin have been a foundation for
            thrill-seeking activities like bungee jumping and rock climbing, but
            they also serve as serene outlooks for the beautiful vistas of the
            planet’s features, especially where elevators have been carved into
            the side of the stone for easier access to the summits.
          </p>

          <p>
            Guilin’s natural features aren’t limited to just spires and hot
            springs. It doesn’t take much travel to explore a myriad of
            geographic wonders far surpassing anything Earth has to offer. The
            planet’s public transit is limited, however, since the difficult
            terrain limits what kinds of infrastructure can be built. Bring your
            own hovercraft!
          </p>
        </div>
      </div>

      <div class="hidden planet-blurb" id="jayne-blurb">
        <div class="planet-image">
          <img
            src="images/jayne.png"
            alt="A depiction of the planet Jayne, produced by SXDL 1.0"
          />
        </div>
        <div class="planet-info">
          <h2>Jayne</h2>
          <div id="custom-blurb"></div>
          <p>
            The planet Jayne, despite its hot weather and limited access to
            drinking water, is a monument to manual handiwork and a marvel of
            modern sculpture. Every historical figure, even those of middling
            significance, is personally commemorated by a life-sized statue. No
            one knows how many statues are present on the planet, but current
            estimates suggest that Jayne’s largest city adds dozens to the count
            every day. There are figures here enshrined in stone who don’t even
            meet the notability requirements of Galactic Wikipedia.
          </p>
          <p>
            For reasons that are fuzzy even to the most dedicated historians,
            Jayne’s cities have universally adopted a policy of redistributing
            wealth through a monthly ceremony during which golden coins are
            dropped from the sky by aerial vehicles. Some question the
            distribution mechanism, but no one is willing to reform the system
            if it means breaking tradition.
          </p>
          <p>
            If you happen to be present during a distribution, even as a
            tourist, you’re welcome to take what you can grab! Some
            penny-pinching visitors have been known to break even on their
            visits to the planet.
          </p>
          <p>
            Traditionally, the exact timing of the monthly money-drop comes as a
            surprise to residents. When the gold is dropped during just the
            right twilight, some say, not without a hint of nostalgia, that the
            tumbling coins off in the distance twinkle like fireflies.
          </p>
        </div>
      </div>
    </div>


  <div class="nav-buttons">
    <button id="btn-back"><=</button>
    <button id="btn-home">Home</button>
    <button id="btn-forward">=></button>
  </div>


    <script>
      //New code
      const data = require("rabbits.json")
      console.log(data)

/*
        fetch('rabbits.json')
            .then(response => response.json())
            .then(data => {

                // Accessing items: Dot notation for properties
                const species_json = data.rabbits[0].card_page.species;  
                // "Rabbit" or "Dog" or "Cat"
                
                const breed_json = data.rabbits[0].card_page.breed;  
                // "Breed of Animal"

                const name_json = data.rabbits[0].card_page.name;  
                // "Breed of Animal"

                const trait0_json = data.rabbits[0].details_page.personality_traits[0];  
                // "Trait 0"

                const trait1_json = data.rabbits[0].details_page.personality_traits[1];  
                // "Trait 1"

                const trait2_json = data.rabbits[0].details_page.personality_traits[2];  
                // "Trait 2"

                console.log(species_json);

                });
*/
      //New code





      const blurbElements = {
        Alekhine: document.getElementById("alekhine-blurb"),
        Janon: document.getElementById("janon-blurb"),
        Guilin: document.getElementById("guilin-blurb"),
        Jayne: document.getElementById("jayne-blurb"),
      };

      const navigateHome = () => {
        for (const blurbElement of Object.values(blurbElements)) {
          blurbElement.classList.add("hidden");
        }

        document.getElementById("home-page").classList.remove("hidden");
        document.getElementById("home-button").classList.add("hidden");
      };

      document.getElementById("home-button").addEventListener("click", () => {
        navigateHome();
      });

      // You can use this function to naviate to one of the four planet subpages.
      const navigateToBlurb = (planetName) => {
        if (!blurbElements[planetName]) {
          throw new Error(`No blurb found for planet ${planetName}`);
        }

        for (const [name, blurbElement] of Object.entries(blurbElements)) {
          if (name === planetName) {
            blurbElement.classList.remove("hidden");
          } else {
            blurbElement.classList.add("hidden");
          }
        }

        document.getElementById("home-page").classList.add("hidden");
        document.getElementById("home-button").classList.remove("hidden");
      };

      document
        .getElementById("alekhine-button")
        .addEventListener("click", () => {
          navigateToBlurb("Alekhine");
        });

      document.getElementById("janon-button").addEventListener("click", () => {
        navigateToBlurb("Janon");
      });

      document.getElementById("guilin-button").addEventListener("click", () => {
        navigateToBlurb("Guilin");
      });

      document.getElementById("jayne-button").addEventListener("click", () => {
        navigateToBlurb("Jayne");
      });

      document
        .getElementById("suggest-form")
        .addEventListener("submit", async (event) => {
          event.preventDefault();

          // YOUR CODE HERE

          //query-input
          const usersInput = document.querySelector("#query-input").value;
          console.log(usersInput);

          // import fetch from 'node-fetch'; // for node.js

          const response = await fetch(
            'https://noggin.rea.gent/responsible-asp-9597',
            {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
                Authorization: 'Bearer rg_v1_vatz9spc2krrl9u5pottbxbgs3llq4cdxb9m_ngk',
              },
              body: JSON.stringify({
                // fill variables here.
                "input": usersInput,
              }),
            }
          ).then(response => response.text());
          
          console.log(response);

          const planetNames = ["Alekhine","Janon","Guilin","Jayne"];
          const responseLines = response.split('\n');
          const planetNameCandidate = responseLines[0].trim();
          let planetName = null;

          if(planetNames.includes(planetNameCandidate)){
            planetName = planetNameCandidate;
            var planetText = responseLines.slice(1).join('\n').trim();
            const blurbElement = document.querySelector(`#custom-blurb`);
            if(blurbElement){
              blurbElement.innerHTML = planetText;
            }
          }
          navigateToBlurb(planetName);

        });
    </script>
    <script src="script.js"></script>

  </body>
</html>
